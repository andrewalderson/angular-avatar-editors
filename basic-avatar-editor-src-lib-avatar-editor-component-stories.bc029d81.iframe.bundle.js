/*! For license information please see basic-avatar-editor-src-lib-avatar-editor-component-stories.bc029d81.iframe.bundle.js.LICENSE.txt */
(self.webpackChunkangular_avatar_editors=self.webpackChunkangular_avatar_editors||[]).push([[873],{"./packages/basic-avatar-editor/src/lib/avatar-editor.component.stories.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Primary:()=>Primary,default:()=>avatar_editor_component_stories});var client=__webpack_require__("./node_modules/@storybook/angular/dist/client/index.js"),tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),Observable=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/Observable.js"),Subject=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/Subject.js"),dateTimestampProvider={now:function(){return(dateTimestampProvider.delegate||Date).now()},delegate:void 0},ReplaySubject=function(_super){function ReplaySubject(_bufferSize,_windowTime,_timestampProvider){void 0===_bufferSize&&(_bufferSize=1/0),void 0===_windowTime&&(_windowTime=1/0),void 0===_timestampProvider&&(_timestampProvider=dateTimestampProvider);var _this=_super.call(this)||this;return _this._bufferSize=_bufferSize,_this._windowTime=_windowTime,_this._timestampProvider=_timestampProvider,_this._buffer=[],_this._infiniteTimeWindow=!0,_this._infiniteTimeWindow=_windowTime===1/0,_this._bufferSize=Math.max(1,_bufferSize),_this._windowTime=Math.max(1,_windowTime),_this}return(0,tslib_es6.ZT)(ReplaySubject,_super),ReplaySubject.prototype.next=function(value){var _a=this,isStopped=_a.isStopped,_buffer=_a._buffer,_infiniteTimeWindow=_a._infiniteTimeWindow,_timestampProvider=_a._timestampProvider,_windowTime=_a._windowTime;isStopped||(_buffer.push(value),!_infiniteTimeWindow&&_buffer.push(_timestampProvider.now()+_windowTime)),this._trimBuffer(),_super.prototype.next.call(this,value)},ReplaySubject.prototype._subscribe=function(subscriber){this._throwIfClosed(),this._trimBuffer();for(var subscription=this._innerSubscribe(subscriber),_infiniteTimeWindow=this._infiniteTimeWindow,copy=this._buffer.slice(),i=0;i<copy.length&&!subscriber.closed;i+=_infiniteTimeWindow?1:2)subscriber.next(copy[i]);return this._checkFinalizedStatuses(subscriber),subscription},ReplaySubject.prototype._trimBuffer=function(){var _bufferSize=this._bufferSize,_timestampProvider=this._timestampProvider,_buffer=this._buffer,_infiniteTimeWindow=this._infiniteTimeWindow,adjustedBufferSize=(_infiniteTimeWindow?1:2)*_bufferSize;if(_bufferSize<1/0&&adjustedBufferSize<_buffer.length&&_buffer.splice(0,_buffer.length-adjustedBufferSize),!_infiniteTimeWindow){for(var now=_timestampProvider.now(),last=0,i=1;i<_buffer.length&&_buffer[i]<=now;i+=2)last=i;last&&_buffer.splice(0,last+1)}},ReplaySubject}(Subject.x),lift=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/util/lift.js"),OperatorSubscriber=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/OperatorSubscriber.js"),innerFrom=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/observable/innerFrom.js"),noop=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/util/noop.js");function takeUntilDestroyed(destroyRef){destroyRef||((0,core.assertInInjectionContext)(takeUntilDestroyed),destroyRef=(0,core.inject)(core.DestroyRef));const destroyed$=new Observable.y((observer=>destroyRef.onDestroy(observer.next.bind(observer))));return source=>source.pipe(function takeUntil(notifier){return(0,lift.e)((function(source,subscriber){(0,innerFrom.Xf)(notifier).subscribe((0,OperatorSubscriber.x)(subscriber,(function(){return subscriber.complete()}),noop.Z)),!subscriber.closed&&source.subscribe(subscriber)}))}(destroyed$))}function toObservable(source,options){!options?.injector&&(0,core.assertInInjectionContext)(toObservable);const injector=options?.injector??(0,core.inject)(core.Injector),subject=new ReplaySubject(1),watcher=(0,core.effect)((()=>{let value;try{value=source()}catch(err){return void(0,core.untracked)((()=>subject.error(err)))}(0,core.untracked)((()=>subject.next(value)))}),{injector,manualCleanup:!0});return injector.get(core.DestroyRef).onDestroy((()=>{watcher.destroy(),subject.complete()})),subject.asObservable()}var isArray=Array.isArray,getPrototypeOf=Object.getPrototypeOf,objectProto=Object.prototype,getKeys=Object.keys;function argsArgArrayOrObject(args){if(1===args.length){var first_1=args[0];if(isArray(first_1))return{args:first_1,keys:null};if(function isPOJO(obj){return obj&&"object"==typeof obj&&getPrototypeOf(obj)===objectProto}(first_1)){var keys=getKeys(first_1);return{args:keys.map((function(key){return first_1[key]})),keys}}}return{args,keys:null}}var from=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/observable/from.js"),identity=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/util/identity.js"),map=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/map.js"),mapOneOrManyArgs_isArray=Array.isArray;function mapOneOrManyArgs(fn){return(0,map.U)((function(args){return function callOrApply(fn,args){return mapOneOrManyArgs_isArray(args)?fn.apply(void 0,(0,tslib_es6.ev)([],(0,tslib_es6.CR)(args))):fn(args)}(fn,args)}))}var util_args=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/util/args.js");var executeSchedule=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/util/executeSchedule.js");function combineLatest(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];var scheduler=(0,util_args.yG)(args),resultSelector=(0,util_args.jO)(args),_a=argsArgArrayOrObject(args),observables=_a.args,keys=_a.keys;if(0===observables.length)return(0,from.D)([],scheduler);var result=new Observable.y(function combineLatestInit(observables,scheduler,valueTransform){void 0===valueTransform&&(valueTransform=identity.y);return function(subscriber){maybeSchedule(scheduler,(function(){for(var length=observables.length,values=new Array(length),active=length,remainingFirstValues=length,_loop_1=function(i){maybeSchedule(scheduler,(function(){var source=(0,from.D)(observables[i],scheduler),hasFirstValue=!1;source.subscribe((0,OperatorSubscriber.x)(subscriber,(function(value){values[i]=value,hasFirstValue||(hasFirstValue=!0,remainingFirstValues--),remainingFirstValues||subscriber.next(valueTransform(values.slice()))}),(function(){--active||subscriber.complete()})))}),subscriber)},i=0;i<length;i++)_loop_1(i)}),subscriber)}}(observables,scheduler,keys?function(values){return function createObject(keys,values){return keys.reduce((function(result,key,i){return result[key]=values[i],result}),{})}(keys,values)}:identity.y));return resultSelector?result.pipe(mapOneOrManyArgs(resultSelector)):result}function maybeSchedule(scheduler,execute,subscription){scheduler?(0,executeSchedule.f)(subscription,scheduler,execute):execute()}var filter=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/filter.js");let NgxAvatarEditorImageDirective=class NgxAvatarEditorImageDirective{#destoryRef=(0,core.inject)(core.DestroyRef);#elementRef=(0,core.inject)(core.ElementRef);#injector=(0,core.inject)(core.Injector);loadHandler(){const{naturalWidth,naturalHeight}=this.#elementRef.nativeElement;this.#imageSize.set({naturalWidth,naturalHeight})}#matrix;#imageSize=(0,core.signal)({naturalWidth:0,naturalHeight:0});#cropBounds=(0,core.signal)(new DOMRectReadOnly);#maximumScale=(0,core.computed)((()=>Math.min(this.#imageSize().naturalWidth/this.#cropBounds().width,this.#imageSize().naturalHeight/this.#cropBounds().height)));#initialScale=(0,core.computed)((()=>1/this.#maximumScale()));ngOnInit(){combineLatest([toObservable(this.#cropBounds,{injector:this.#injector}),toObservable(this.#imageSize,{injector:this.#injector})]).pipe(takeUntilDestroyed(this.#destoryRef),(0,filter.h)((()=>this.#elementRef.nativeElement.complete))).subscribe((([bounds,size])=>this.#fitImage(bounds,size)))}_setCropBounds(bounds){this.#cropBounds.set(bounds)}#fitImage(cropBounds,imageSize){const{width,height}=cropBounds;if(0===width||0===height)return;const{naturalWidth,naturalHeight}=imageSize;if(0===naturalWidth||0===naturalHeight)return;const x=(width-naturalWidth)/2,y=(height-naturalHeight)/2;this.#matrix=new DOMMatrix([this.#initialScale(),0,0,this.#initialScale(),x,y]),this.#setTransform(this.#matrix)}#setTransform(matrix){matrix&&(this.#elementRef.nativeElement.style.transform=matrix.toString())}static#_=this.propDecorators={loadHandler:[{type:core.HostListener,args:["load"]}]}};NgxAvatarEditorImageDirective=(0,tslib_es6.gn)([(0,core.Directive)({selector:"img[ngxAvatarEditorImage]",standalone:!0})],NgxAvatarEditorImageDirective);var avatar_editor_componentngResource=__webpack_require__("./packages/basic-avatar-editor/src/lib/avatar-editor.component.scss?ngResource"),avatar_editor_componentngResource_default=__webpack_require__.n(avatar_editor_componentngResource),common=__webpack_require__("./node_modules/@angular/common/fesm2022/common.mjs");let NgxAvatarEditorComponent=class NgxAvatarEditorComponent{#elementRef=(0,core.inject)(core.ElementRef);ngAfterViewInit(){const element=this.#elementRef.nativeElement;this._image._setCropBounds(element.getBoundingClientRect())}static#_=this.propDecorators={_image:[{type:core.ContentChild,args:[NgxAvatarEditorImageDirective]}]}};NgxAvatarEditorComponent=(0,tslib_es6.gn)([(0,core.Component)({selector:"ngx-avatar-editor",standalone:!0,imports:[common.CommonModule],template:'<ng-content select="[ngxAvatarEditorImage]" />\n',encapsulation:core.ViewEncapsulation.ShadowDom,changeDetection:core.ChangeDetectionStrategy.OnPush,styles:[avatar_editor_componentngResource_default()]})],NgxAvatarEditorComponent);const avatar_editor_component_stories={component:NgxAvatarEditorComponent,title:"Components/BasicAvatarEditor",decorators:[(0,client.moduleMetadata)({imports:[NgxAvatarEditorImageDirective]})],parameters:{layout:"centered"}},Primary={render:args=>({props:args,template:'<ngx-avatar-editor style="width: 256px; height: 256px;"><img ngxAvatarEditorImage [src]="src"/></ngx-avatar-editor>'}),args:{src:"grace-hilty-uvAhJHLul_Q-unsplash.jpg"}}},"./node_modules/@storybook/angular/dist/client/argsToTemplate.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.argsToTemplate=void 0,exports.argsToTemplate=function argsToTemplate(args,options={}){const includeSet=options.include?new Set(options.include):null,excludeSet=options.exclude?new Set(options.exclude):null;return Object.entries(args).filter((([key])=>void 0!==args[key])).filter((([key])=>includeSet?includeSet.has(key):!excludeSet||!excludeSet.has(key))).map((([key,value])=>"function"==typeof value?`(${key})="${key}($event)"`:`[${key}]="${key}"`)).join(" ")}},"./node_modules/@storybook/angular/dist/client/decorators.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.componentWrapperDecorator=exports.applicationConfig=exports.moduleMetadata=void 0;const ComputesTemplateFromComponent_1=__webpack_require__("./node_modules/@storybook/angular/dist/client/angular-beta/ComputesTemplateFromComponent.js"),NgComponentAnalyzer_1=__webpack_require__("./node_modules/@storybook/angular/dist/client/angular-beta/utils/NgComponentAnalyzer.js");exports.moduleMetadata=metadata=>storyFn=>{const story=storyFn(),storyMetadata=story.moduleMetadata||{};return metadata=metadata||{},{...story,moduleMetadata:{declarations:[...metadata.declarations||[],...storyMetadata.declarations||[]],entryComponents:[...metadata.entryComponents||[],...storyMetadata.entryComponents||[]],imports:[...metadata.imports||[],...storyMetadata.imports||[]],schemas:[...metadata.schemas||[],...storyMetadata.schemas||[]],providers:[...metadata.providers||[],...storyMetadata.providers||[]]}}},exports.applicationConfig=function applicationConfig(config){return storyFn=>{const story=storyFn(),storyConfig=story.applicationConfig;return{...story,applicationConfig:storyConfig||config?{...config,...storyConfig,providers:[...config?.providers||[],...storyConfig?.providers||[]]}:void 0}}};exports.componentWrapperDecorator=(element,props)=>(storyFn,storyContext)=>{const story=storyFn(),currentProps="function"==typeof props?props(storyContext):props,template=(0,NgComponentAnalyzer_1.isComponent)(element)?(0,ComputesTemplateFromComponent_1.computesTemplateFromComponent)(element,currentProps??{},story.template):element(story.template);return{...story,template,...currentProps||story.props?{props:{...currentProps,...story.props}}:{}}}},"./node_modules/@storybook/angular/dist/client/index.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k);var desc=Object.getOwnPropertyDescriptor(m,k);desc&&!("get"in desc?!m.__esModule:desc.writable||desc.configurable)||(desc={enumerable:!0,get:function(){return m[k]}}),Object.defineProperty(o,k2,desc)}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.argsToTemplate=exports.applicationConfig=exports.componentWrapperDecorator=exports.moduleMetadata=void 0,__webpack_require__("./node_modules/@storybook/angular/dist/client/globals.js"),__exportStar(__webpack_require__("./node_modules/@storybook/angular/dist/client/public-api.js"),exports),__exportStar(__webpack_require__("./node_modules/@storybook/angular/dist/client/public-types.js"),exports);var decorators_1=__webpack_require__("./node_modules/@storybook/angular/dist/client/decorators.js");Object.defineProperty(exports,"moduleMetadata",{enumerable:!0,get:function(){return decorators_1.moduleMetadata}}),Object.defineProperty(exports,"componentWrapperDecorator",{enumerable:!0,get:function(){return decorators_1.componentWrapperDecorator}}),Object.defineProperty(exports,"applicationConfig",{enumerable:!0,get:function(){return decorators_1.applicationConfig}});var argsToTemplate_1=__webpack_require__("./node_modules/@storybook/angular/dist/client/argsToTemplate.js");Object.defineProperty(exports,"argsToTemplate",{enumerable:!0,get:function(){return argsToTemplate_1.argsToTemplate}})},"./node_modules/@storybook/angular/dist/client/public-api.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k);var desc=Object.getOwnPropertyDescriptor(m,k);desc&&!("get"in desc?!m.__esModule:desc.writable||desc.configurable)||(desc={enumerable:!0,get:function(){return m[k]}}),Object.defineProperty(o,k2,desc)}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.raw=exports.forceReRender=exports.configure=exports.storiesOf=void 0;const preview_api_1=__webpack_require__("@storybook/preview-api"),render_1=__webpack_require__("./node_modules/@storybook/angular/dist/client/render.js"),decorateStory_1=__importDefault(__webpack_require__("./node_modules/@storybook/angular/dist/client/decorateStory.js"));__exportStar(__webpack_require__("./node_modules/@storybook/angular/dist/client/public-types.js"),exports);const api=(0,preview_api_1.start)(render_1.renderToCanvas,{decorateStory:decorateStory_1.default,render:render_1.render});exports.storiesOf=(kind,m)=>api.clientApi.storiesOf(kind,m).addParameters({renderer:"angular"});exports.configure=(...args)=>api.configure("angular",...args),exports.forceReRender=api.forceReRender,exports.raw=api.clientApi.raw},"./node_modules/@storybook/angular/dist/client/public-types.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},"./node_modules/css-loader/dist/runtime/api.js":module=>{"use strict";module.exports=function(cssWithMappingToString){var list=[];return list.toString=function toString(){return this.map((function(item){var content="",needLayer=void 0!==item[5];return item[4]&&(content+="@supports (".concat(item[4],") {")),item[2]&&(content+="@media ".concat(item[2]," {")),needLayer&&(content+="@layer".concat(item[5].length>0?" ".concat(item[5]):""," {")),content+=cssWithMappingToString(item),needLayer&&(content+="}"),item[2]&&(content+="}"),item[4]&&(content+="}"),content})).join("")},list.i=function i(modules,media,dedupe,supports,layer){"string"==typeof modules&&(modules=[[null,modules,void 0]]);var alreadyImportedModules={};if(dedupe)for(var k=0;k<this.length;k++){var id=this[k][0];null!=id&&(alreadyImportedModules[id]=!0)}for(var _k=0;_k<modules.length;_k++){var item=[].concat(modules[_k]);dedupe&&alreadyImportedModules[item[0]]||(void 0!==layer&&(void 0===item[5]||(item[1]="@layer".concat(item[5].length>0?" ".concat(item[5]):""," {").concat(item[1],"}")),item[5]=layer),media&&(item[2]?(item[1]="@media ".concat(item[2]," {").concat(item[1],"}"),item[2]=media):item[2]=media),supports&&(item[4]?(item[1]="@supports (".concat(item[4],") {").concat(item[1],"}"),item[4]=supports):item[4]="".concat(supports)),list.push(item))}},list}},"./node_modules/css-loader/dist/runtime/noSourceMaps.js":module=>{"use strict";module.exports=function(i){return i[1]}},"./packages/basic-avatar-editor/src/lib/avatar-editor.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,":host {\n  display: block;\n  position: relative;\n}\n\nimg[ngxAvatarEditorImage] {\n  position: absolute;\n}",""]),module.exports=___CSS_LOADER_EXPORT___.toString()}}]);