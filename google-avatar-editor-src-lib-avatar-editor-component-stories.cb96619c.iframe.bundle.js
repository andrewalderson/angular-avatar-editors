(self.webpackChunkangular_avatar_editors=self.webpackChunkangular_avatar_editors||[]).push([[60],{"./packages/google-avatar-editor/src/lib/avatar-editor.component.stories.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Primary:()=>Primary,default:()=>avatar_editor_component_stories});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs");var avatar_editor_componentngResource=__webpack_require__("./packages/google-avatar-editor/src/lib/avatar-editor.component.scss?ngResource"),avatar_editor_componentngResource_default=__webpack_require__.n(avatar_editor_componentngResource),common=__webpack_require__("./node_modules/@angular/common/fesm2022/common.mjs"),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),rxjs_interop=__webpack_require__("./node_modules/@angular/core/fesm2022/rxjs-interop.mjs"),combineLatest=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/observable/combineLatest.js"),filter=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/filter.js");let NgxAvatarEditorImageDirective=class NgxAvatarEditorImageDirective{#destoryRef=(0,core.inject)(core.DestroyRef);#elementRef=(0,core.inject)(core.ElementRef);#injector=(0,core.inject)(core.Injector);loadHandler(){const{naturalWidth,naturalHeight}=this.#elementRef.nativeElement;this.#imageSize.set({naturalWidth,naturalHeight})}#matrix;#imageSize=(0,core.signal)({naturalWidth:0,naturalHeight:0});#cropBounds=(0,core.signal)(new DOMRectReadOnly);#maxScale=1;#minScale=(0,core.computed)((()=>1/Math.min(this.#imageSize().naturalWidth/this.#cropBounds().width,this.#imageSize().naturalHeight/this.#cropBounds().height)));ngOnInit(){(0,combineLatest.a)([(0,rxjs_interop.Dx)(this.#cropBounds,{injector:this.#injector}),(0,rxjs_interop.Dx)(this.#imageSize,{injector:this.#injector})]).pipe((0,rxjs_interop.sL)(this.#destoryRef),(0,filter.h)((()=>this.#elementRef.nativeElement.complete))).subscribe((([bounds,size])=>this.#fitImage(bounds,size)))}_setCropBounds(bounds){this.#cropBounds.set(bounds)}#fitImage(cropBounds,imageSize){const{width,height}=cropBounds;if(0===width||0===height)return;const{naturalWidth,naturalHeight}=imageSize;if(0===naturalWidth||0===naturalHeight)return;const x=(width-naturalWidth)/2,y=(height-naturalHeight)/2;this.#matrix=new DOMMatrix([this.#minScale(),0,0,this.#minScale(),x,y]),this.#setTransform(this.#matrix)}#setTransform(matrix){matrix&&(this.#elementRef.nativeElement.style.transform=matrix.toString())}static#_=this.propDecorators={loadHandler:[{type:core.HostListener,args:["load"]}]}};NgxAvatarEditorImageDirective=(0,tslib_es6.gn)([(0,core.Directive)({selector:"img[ngxAvatarEditorImage]",standalone:!0})],NgxAvatarEditorImageDirective);let NgxAvatarEditorComponent=class NgxAvatarEditorComponent{ngAfterViewInit(){const canvasElement=this._canvas.nativeElement;this._image._setCropBounds(canvasElement.getBoundingClientRect())}static#_=this.propDecorators={src:[{type:core.Input,args:[{required:!0}]}],_canvas:[{type:core.ViewChild,args:["canvas"]}],_image:[{type:core.ViewChild,args:[NgxAvatarEditorImageDirective]}]}};NgxAvatarEditorComponent=(0,tslib_es6.gn)([(0,core.Component)({selector:"ngx-avatar-editor",standalone:!0,imports:[common.CommonModule,NgxAvatarEditorImageDirective],template:'<div #canvas id="canvas">\n  <img ngxAvatarEditorImage [src]="src" />\n</div>\n<div id="transform-frame">\n  <div id="shade"></div>\n</div>\n',encapsulation:core.ViewEncapsulation.ShadowDom,changeDetection:core.ChangeDetectionStrategy.OnPush,styles:[avatar_editor_componentngResource_default()]})],NgxAvatarEditorComponent);const avatar_editor_component_stories={component:NgxAvatarEditorComponent,title:"Components/GoogleAvatarEditor",parameters:{layout:"centered"}},Primary={args:{src:"grace-hilty-uvAhJHLul_Q-unsplash.jpg"}}},"./packages/google-avatar-editor/src/lib/avatar-editor.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,":host {\n  position: relative;\n  box-sizing: border-box;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  height: 1000px;\n  width: 840px;\n  background: #2e3035;\n  overflow: hidden;\n  container: host/size;\n}\n\n#canvas {\n  --_canvas-size: 75%;\n  display: block;\n  position: relative;\n  box-sizing: border-box;\n  aspect-ratio: 1/1;\n  width: var(--_canvas-size);\n  height: auto;\n  pointer-events: none;\n}\n\n@container (aspect-ratio > 1) {\n  #canvas {\n    width: auto;\n    height: var(--_canvas-size);\n  }\n}\nimg[ngxAvatarEditorImage] {\n  position: absolute;\n}\n\n#transform-frame {\n  position: absolute;\n  inset: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n#shade {\n  --_canvas-size: 75%;\n  display: block;\n  position: relative;\n  box-sizing: border-box;\n  aspect-ratio: 1/1;\n  width: var(--_canvas-size);\n  height: auto;\n  border-radius: 50%;\n  border: none;\n  outline: max(100vw, 100vh) solid rgba(0, 0, 0, 0.3);\n  pointer-events: none;\n}\n\n@container (aspect-ratio > 1) {\n  #shade {\n    width: auto;\n    height: var(--_canvas-size);\n  }\n}",""]),module.exports=___CSS_LOADER_EXPORT___.toString()}}]);